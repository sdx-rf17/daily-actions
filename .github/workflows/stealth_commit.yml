name: Stealth Green Commit 🕵️

on:
  schedule:
    - cron: '0 0 * * *'    # 00:00 UTC
    - cron: '4 0 * * *'    # 04:00 UTC
    - cron: '8 0 * * *'    # 08:00 UTC
    - cron: '12 0 * * *'   # 12:00 UTC
    - cron: '16 0 * * *'   # 16:00 UTC
  workflow_dispatch:      # Allow manual testing

jobs:
  stealth_commit:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Set Git identity
      run: |
        git config user.name "sadek"
        git config user.email "sadek7dev@gmail.com"

    - name: Stealth update and commit
      run: |
        echo "Last touched on $(date -u)" >> .keep_alive
        git add .keep_alive
        git commit -m "🕵️ Stealth commit to keep activity alive"
         git pull --rebase origin main
        git push
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
